
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Types &#8212; Solidity 0.4.20 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.4.20',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Units and Globally Available Variables" href="units-and-global-variables.html" />
    <link rel="prev" title="Structure of a Contract" href="structure-of-a-contract.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="types">
<span id="index-0"></span><span id="id1"></span><h1>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h1>
<p>Solidity is a statically typed language, which means that the type of each
variable (state and local) needs to be specified (or at least known -
see <a class="reference internal" href="#type-deduction"><span class="std std-ref">Type Deduction</span></a> below) at
compile-time. Solidity provides several elementary types which can be combined
to form complex types.</p>
<p>In addition, types can interact with each other in expressions containing
operators. For a quick reference of the various operators, see <a class="reference internal" href="miscellaneous.html#order"><span class="std std-ref">Order of Precedence of Operators</span></a>.</p>
<div class="section" id="value-types">
<span id="index-1"></span><h2>Value Types<a class="headerlink" href="#value-types" title="Permalink to this headline">¶</a></h2>
<p>The following types are also called value types because variables of these
types will always be passed by value, i.e. they are always copied when they
are used as function arguments or in assignments.</p>
<div class="section" id="booleans">
<span id="index-2"></span><h3>Booleans<a class="headerlink" href="#booleans" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">bool</span></code>: The possible values are constants <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>.</p>
<p>Operators:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">!</span></code> (logical negation)</li>
<li><code class="docutils literal"><span class="pre">&amp;&amp;</span></code> (logical conjunction, “and”)</li>
<li><code class="docutils literal"><span class="pre">||</span></code> (logical disjunction, “or”)</li>
<li><code class="docutils literal"><span class="pre">==</span></code> (equality)</li>
<li><code class="docutils literal"><span class="pre">!=</span></code> (inequality)</li>
</ul>
<p>The operators <code class="docutils literal"><span class="pre">||</span></code> and <code class="docutils literal"><span class="pre">&amp;&amp;</span></code> apply the common short-circuiting rules. This means that in the expression <code class="docutils literal"><span class="pre">f(x)</span> <span class="pre">||</span> <span class="pre">g(y)</span></code>, if <code class="docutils literal"><span class="pre">f(x)</span></code> evaluates to <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">g(y)</span></code> will not be evaluated even if it may have side-effects.</p>
</div>
<div class="section" id="integers">
<span id="index-3"></span><h3>Integers<a class="headerlink" href="#integers" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">int</span></code> / <code class="docutils literal"><span class="pre">uint</span></code>: Signed and unsigned integers of various sizes. Keywords <code class="docutils literal"><span class="pre">uint8</span></code> to <code class="docutils literal"><span class="pre">uint256</span></code> in steps of <code class="docutils literal"><span class="pre">8</span></code> (unsigned of 8 up to 256 bits) and <code class="docutils literal"><span class="pre">int8</span></code> to <code class="docutils literal"><span class="pre">int256</span></code>. <code class="docutils literal"><span class="pre">uint</span></code> and <code class="docutils literal"><span class="pre">int</span></code> are aliases for <code class="docutils literal"><span class="pre">uint256</span></code> and <code class="docutils literal"><span class="pre">int256</span></code>, respectively.</p>
<p>Operators:</p>
<ul class="simple">
<li>Comparisons: <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal"><span class="pre">bool</span></code>)</li>
<li>Bit operators: <code class="docutils literal"><span class="pre">&amp;</span></code>, <code class="docutils literal"><span class="pre">|</span></code>, <code class="docutils literal"><span class="pre">^</span></code> (bitwise exclusive or), <code class="docutils literal"><span class="pre">~</span></code> (bitwise negation)</li>
<li>Arithmetic operators: <code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">-</span></code>, unary <code class="docutils literal"><span class="pre">-</span></code>, unary <code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">/</span></code>, <code class="docutils literal"><span class="pre">%</span></code> (remainder), <code class="docutils literal"><span class="pre">**</span></code> (exponentiation), <code class="docutils literal"><span class="pre">&lt;&lt;</span></code> (left shift), <code class="docutils literal"><span class="pre">&gt;&gt;</span></code> (right shift)</li>
</ul>
<p>Division always truncates (it is just compiled to the <code class="docutils literal"><span class="pre">DIV</span></code> opcode of the EVM), but it does not truncate if both
operators are <a class="reference internal" href="#rational-literals"><span class="std std-ref">literals</span></a> (or literal expressions).</p>
<p>Division by zero and modulus with zero throws a runtime exception.</p>
<p>The result of a shift operation is the type of the left operand. The
expression <code class="docutils literal"><span class="pre">x</span> <span class="pre">&lt;&lt;</span> <span class="pre">y</span></code> is equivalent to <code class="docutils literal"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">2**y</span></code>, and <code class="docutils literal"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code> is
equivalent to <code class="docutils literal"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2**y</span></code>. This means that shifting negative numbers
sign extends. Shifting by a negative amount throws a runtime exception.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The results produced by shift right of negative values of signed integer types is different from those produced
by other programming languages. In Solidity, shift right maps to division so the shifted negative values
are going to be rounded towards zero (truncated). In other programming languages the shift right of negative values
works like division with rounding down (towards negative infinity).</p>
</div>
</div>
<div class="section" id="fixed-point-numbers">
<span id="index-4"></span><h3>Fixed Point Numbers<a class="headerlink" href="#fixed-point-numbers" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Fixed point numbers are not fully supported by Solidity yet. They can be declared, but
cannot be assigned to or from.</p>
</div>
<p><code class="docutils literal"><span class="pre">fixed</span></code> / <code class="docutils literal"><span class="pre">ufixed</span></code>: Signed and unsigned fixed point number of various sizes. Keywords <code class="docutils literal"><span class="pre">ufixedMxN</span></code> and <code class="docutils literal"><span class="pre">fixedMxN</span></code>, where <code class="docutils literal"><span class="pre">M</span></code> represents the number of bits taken by
the type and <code class="docutils literal"><span class="pre">N</span></code> represents how many decimal points are available. <code class="docutils literal"><span class="pre">M</span></code> must be divisible by 8 and goes from 8 to 256 bits. <code class="docutils literal"><span class="pre">N</span></code> must be between 0 and 80, inclusive.
<code class="docutils literal"><span class="pre">ufixed</span></code> and <code class="docutils literal"><span class="pre">fixed</span></code> are aliases for <code class="docutils literal"><span class="pre">ufixed128x19</span></code> and <code class="docutils literal"><span class="pre">fixed128x19</span></code>, respectively.</p>
<p>Operators:</p>
<ul class="simple">
<li>Comparisons: <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal"><span class="pre">bool</span></code>)</li>
<li>Arithmetic operators: <code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">-</span></code>, unary <code class="docutils literal"><span class="pre">-</span></code>, unary <code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">/</span></code>, <code class="docutils literal"><span class="pre">%</span></code> (remainder)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The main difference between floating point (<code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">double</span></code> in many languages, more precisely IEEE 754 numbers) and fixed point numbers is
that the number of bits used for the integer and the fractional part (the part after the decimal dot) is flexible in the former, while it is strictly
defined in the latter. Generally, in floating point almost the entire space is used to represent the number, while only a small number of bits define
where the decimal point is.</p>
</div>
</div>
<div class="section" id="address">
<span id="index-5"></span><span id="id2"></span><h3>Address<a class="headerlink" href="#address" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">address</span></code>: Holds a 20 byte value (size of an Ethereum address). Address types also have members and serve as a base for all contracts.</p>
<p>Operators:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code> and <code class="docutils literal"><span class="pre">&gt;</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Starting with version 0.5.0 contracts do not derive from the address type, but can still be explicitly converted to address.</p>
</div>
<div class="section" id="members-of-addresses">
<span id="id3"></span><h4>Members of Addresses<a class="headerlink" href="#members-of-addresses" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">balance</span></code> and <code class="docutils literal"><span class="pre">transfer</span></code></li>
</ul>
<p>For a quick reference, see <a class="reference internal" href="units-and-global-variables.html#address-related"><span class="std std-ref">Address Related</span></a>.</p>
<p>It is possible to query the balance of an address using the property <code class="docutils literal"><span class="pre">balance</span></code>
and to send Ether (in units of wei) to an address using the <code class="docutils literal"><span class="pre">transfer</span></code> function:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">address</span> <span class="nx">x</span> <span class="o">=</span> <span class="mh">0x123</span><span class="p">;</span>
<span class="kt">address</span> <span class="nx">myAddress</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">balance</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="o">&amp;&amp;</span> <span class="nx">myAddress</span><span class="p">.</span><span class="nx">balance</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="nx">x</span><span class="p">.</span><span class="nx">transfer</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <code class="docutils literal"><span class="pre">x</span></code> is a contract address, its code (more specifically: its fallback function, if present) will be executed together with the <code class="docutils literal"><span class="pre">transfer</span></code> call (this is a feature of the EVM and cannot be prevented). If that execution runs out of gas or fails in any way, the Ether transfer will be reverted and the current contract will stop with an exception.</p>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">send</span></code></li>
</ul>
<p>Send is the low-level counterpart of <code class="docutils literal"><span class="pre">transfer</span></code>. If the execution fails, the current contract will not stop with an exception, but <code class="docutils literal"><span class="pre">send</span></code> will return <code class="docutils literal"><span class="pre">false</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There are some dangers in using <code class="docutils literal"><span class="pre">send</span></code>: The transfer fails if the call stack depth is at 1024
(this can always be forced by the caller) and it also fails if the recipient runs out of gas. So in order
to make safe Ether transfers, always check the return value of <code class="docutils literal"><span class="pre">send</span></code>, use <code class="docutils literal"><span class="pre">transfer</span></code> or even better:
use a pattern where the recipient withdraws the money.</p>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">call</span></code>, <code class="docutils literal"><span class="pre">callcode</span></code> and <code class="docutils literal"><span class="pre">delegatecall</span></code></li>
</ul>
<p>Furthermore, to interface with contracts that do not adhere to the ABI,
the function <code class="docutils literal"><span class="pre">call</span></code> is provided which takes an arbitrary number of arguments of any type. These arguments are padded to 32 bytes and concatenated. One exception is the case where the first argument is encoded to exactly four bytes. In this case, it is not padded to allow the use of function signatures here.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">address</span> <span class="nx">nameReg</span> <span class="o">=</span> <span class="mh">0x72ba7d8e73fe8eb666ea66babc8116a41bfb10e2</span><span class="p">;</span>
<span class="nx">nameReg</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="s2">&quot;MyName&quot;</span><span class="p">);</span>
<span class="nx">nameReg</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kt">bytes4</span><span class="p">(</span><span class="nb">keccak256</span><span class="p">(</span><span class="s2">&quot;fun(uint256)&quot;</span><span class="p">)),</span> <span class="nx">a</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">call</span></code> returns a boolean indicating whether the invoked function terminated (<code class="docutils literal"><span class="pre">true</span></code>) or caused an EVM exception (<code class="docutils literal"><span class="pre">false</span></code>). It is not possible to access the actual data returned (for this we would need to know the encoding and size in advance).</p>
<p>It is possible to adjust the supplied gas with the <code class="docutils literal"><span class="pre">.gas()</span></code> modifier:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="nx">namReg</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">gas</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="s2">&quot;MyName&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Similarly, the supplied Ether value can be controlled too:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="nx">nameReg</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="mi">1</span> <span class="kt">ether</span><span class="p">)(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="s2">&quot;MyName&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Lastly, these modifiers can be combined. Their order does not matter:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="nx">nameReg</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">gas</span><span class="p">(</span><span class="mi">1000000</span><span class="p">).</span><span class="nx">value</span><span class="p">(</span><span class="mi">1</span> <span class="kt">ether</span><span class="p">)(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="s2">&quot;MyName&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It is not yet possible to use the gas or value modifiers on overloaded functions.</p>
<p class="last">A workaround is to introduce a special case for gas and value and just re-check
whether they are present at the point of overload resolution.</p>
</div>
<p>In a similar way, the function <code class="docutils literal"><span class="pre">delegatecall</span></code> can be used: the difference is that only the code of the given address is used, all other aspects (storage, balance, …) are taken from the current contract. The purpose of <code class="docutils literal"><span class="pre">delegatecall</span></code> is to use library code which is stored in another contract. The user has to ensure that the layout of storage in both contracts is suitable for delegatecall to be used. Prior to homestead, only a limited variant called <code class="docutils literal"><span class="pre">callcode</span></code> was available that did not provide access to the original <code class="docutils literal"><span class="pre">msg.sender</span></code> and <code class="docutils literal"><span class="pre">msg.value</span></code> values.</p>
<p>All three functions <code class="docutils literal"><span class="pre">call</span></code>, <code class="docutils literal"><span class="pre">delegatecall</span></code> and <code class="docutils literal"><span class="pre">callcode</span></code> are very low-level functions and should only be used as a <em>last resort</em> as they break the type-safety of Solidity.</p>
<p>The <code class="docutils literal"><span class="pre">.gas()</span></code> option is available on all three methods, while the <code class="docutils literal"><span class="pre">.value()</span></code> option is not supported for <code class="docutils literal"><span class="pre">delegatecall</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All contracts inherit the members of address, so it is possible to query the balance of the
current contract using <code class="docutils literal"><span class="pre">this.balance</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The use of <code class="docutils literal"><span class="pre">callcode</span></code> is discouraged and will be removed in the future.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">All these functions are low-level functions and should be used with care.
Specifically, any unknown contract might be malicious and if you call it, you
hand over control to that contract which could in turn call back into
your contract, so be prepared for changes to your state variables
when the call returns.</p>
</div>
</div>
</div>
<div class="section" id="fixed-size-byte-arrays">
<span id="index-6"></span><h3>Fixed-size byte arrays<a class="headerlink" href="#fixed-size-byte-arrays" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">bytes1</span></code>, <code class="docutils literal"><span class="pre">bytes2</span></code>, <code class="docutils literal"><span class="pre">bytes3</span></code>, …, <code class="docutils literal"><span class="pre">bytes32</span></code>. <code class="docutils literal"><span class="pre">byte</span></code> is an alias for <code class="docutils literal"><span class="pre">bytes1</span></code>.</p>
<p>Operators:</p>
<ul class="simple">
<li>Comparisons: <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal"><span class="pre">bool</span></code>)</li>
<li>Bit operators: <code class="docutils literal"><span class="pre">&amp;</span></code>, <code class="docutils literal"><span class="pre">|</span></code>, <code class="docutils literal"><span class="pre">^</span></code> (bitwise exclusive or), <code class="docutils literal"><span class="pre">~</span></code> (bitwise negation), <code class="docutils literal"><span class="pre">&lt;&lt;</span></code> (left shift), <code class="docutils literal"><span class="pre">&gt;&gt;</span></code> (right shift)</li>
<li>Index access: If <code class="docutils literal"><span class="pre">x</span></code> is of type <code class="docutils literal"><span class="pre">bytesI</span></code>, then <code class="docutils literal"><span class="pre">x[k]</span></code> for <code class="docutils literal"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">I</span></code> returns the <code class="docutils literal"><span class="pre">k</span></code> th byte (read-only).</li>
</ul>
<p>The shifting operator works with any integer type as right operand (but will
return the type of the left operand), which denotes the number of bits to shift by.
Shifting by a negative amount will cause a runtime exception.</p>
<p>Members:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">.length</span></code> yields the fixed length of the byte array (read-only).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is possible to use an array of bytes as <code class="docutils literal"><span class="pre">byte[]</span></code>, but it is wasting a lot of space, 31 bytes every element,
to be exact, when passing in calls. It is better to use <code class="docutils literal"><span class="pre">bytes</span></code>.</p>
</div>
</div>
<div class="section" id="dynamically-sized-byte-array">
<h3>Dynamically-sized byte array<a class="headerlink" href="#dynamically-sized-byte-array" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">bytes</span></code>:</dt>
<dd>Dynamically-sized byte array, see <a class="reference internal" href="#arrays"><span class="std std-ref">Arrays</span></a>. Not a value-type!</dd>
<dt><code class="docutils literal"><span class="pre">string</span></code>:</dt>
<dd>Dynamically-sized UTF-8-encoded string, see <a class="reference internal" href="#arrays"><span class="std std-ref">Arrays</span></a>. Not a value-type!</dd>
</dl>
<p>As a rule of thumb, use <code class="docutils literal"><span class="pre">bytes</span></code> for arbitrary-length raw byte data and <code class="docutils literal"><span class="pre">string</span></code>
for arbitrary-length string (UTF-8) data. If you can limit the length to a certain
number of bytes, always use one of <code class="docutils literal"><span class="pre">bytes1</span></code> to <code class="docutils literal"><span class="pre">bytes32</span></code> because they are much cheaper.</p>
</div>
<div class="section" id="address-literals">
<span id="index-7"></span><span id="id4"></span><h3>Address Literals<a class="headerlink" href="#address-literals" title="Permalink to this headline">¶</a></h3>
<p>Hexadecimal literals that pass the address checksum test, for example
<code class="docutils literal"><span class="pre">0xdCad3a6d3569DF655070DEd06cb7A1b2Ccd1D3AF</span></code> are of <code class="docutils literal"><span class="pre">address</span></code> type.
Hexadecimal literals that are between 39 and 41 digits
long and do not pass the checksum test produce
a warning and are treated as regular rational number literals.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mixed-case address checksum format is defined in <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md">EIP-55</a>.</p>
</div>
</div>
<div class="section" id="rational-and-integer-literals">
<span id="rational-literals"></span><span id="index-8"></span><h3>Rational and Integer Literals<a class="headerlink" href="#rational-and-integer-literals" title="Permalink to this headline">¶</a></h3>
<p>Integer literals are formed from a sequence of numbers in the range 0-9.
They are interpreted as decimals. For example, <code class="docutils literal"><span class="pre">69</span></code> means sixty nine.
Octal literals do not exist in Solidity and leading zeros are invalid.</p>
<p>Decimal fraction literals are formed by a <code class="docutils literal"><span class="pre">.</span></code> with at least one number on
one side.  Examples include <code class="docutils literal"><span class="pre">1.</span></code>, <code class="docutils literal"><span class="pre">.1</span></code> and <code class="docutils literal"><span class="pre">1.3</span></code>.</p>
<p>Scientific notation is also supported, where the base can have fractions, while the exponent cannot.
Examples include <code class="docutils literal"><span class="pre">2e10</span></code>, <code class="docutils literal"><span class="pre">-2e10</span></code>, <code class="docutils literal"><span class="pre">2e-10</span></code>, <code class="docutils literal"><span class="pre">2.5e1</span></code>.</p>
<p>Number literal expressions retain arbitrary precision until they are converted to a non-literal type (i.e. by
using them together with a non-literal expression).
This means that computations do not overflow and divisions do not truncate
in number literal expressions.</p>
<p>For example, <code class="docutils literal"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> results in the constant <code class="docutils literal"><span class="pre">1</span></code> (of type <code class="docutils literal"><span class="pre">uint8</span></code>)
although intermediate results would not even fit the machine word size. Furthermore, <code class="docutils literal"><span class="pre">.5</span> <span class="pre">*</span> <span class="pre">8</span></code> results
in the integer <code class="docutils literal"><span class="pre">4</span></code> (although non-integers were used in between).</p>
<p>Any operator that can be applied to integers can also be applied to number literal expressions as
long as the operands are integers. If any of the two is fractional, bit operations are disallowed
and exponentiation is disallowed if the exponent is fractional (because that might result in
a non-rational number).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Solidity has a number literal type for each rational number.
Integer literals and rational number literals belong to number literal types.
Moreover, all number literal expressions (i.e. the expressions that
contain only number literals and operators) belong to number literal
types.  So the number literal expressions <code class="docutils literal"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code> and <code class="docutils literal"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">1</span></code> both
belong to the same number literal type for the rational number three.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Division on integer literals used to truncate in earlier versions, but it will now convert into a rational number, i.e. <code class="docutils literal"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">2</span></code> is not equal to <code class="docutils literal"><span class="pre">2</span></code>, but to <code class="docutils literal"><span class="pre">2.5</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Number literal expressions are converted into a non-literal type as soon as they are used with non-literal
expressions. Even though we know that the value of the
expression assigned to <code class="docutils literal"><span class="pre">b</span></code> in the following example evaluates to
an integer, but the partial expression <code class="docutils literal"><span class="pre">2.5</span> <span class="pre">+</span> <span class="pre">a</span></code> does not type check so the code
does not compile</p>
</div>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">uint128</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">uint128</span> <span class="nx">b</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="string-literals">
<span id="index-9"></span><h3>String Literals<a class="headerlink" href="#string-literals" title="Permalink to this headline">¶</a></h3>
<p>String literals are written with either double or single-quotes (<code class="docutils literal"><span class="pre">&quot;foo&quot;</span></code> or <code class="docutils literal"><span class="pre">'bar'</span></code>).  They do not imply trailing zeroes as in C; <code class="docutils literal"><span class="pre">&quot;foo&quot;</span></code> represents three bytes not four.  As with integer literals, their type can vary, but they are implicitly convertible to <code class="docutils literal"><span class="pre">bytes1</span></code>, …, <code class="docutils literal"><span class="pre">bytes32</span></code>, if they fit, to <code class="docutils literal"><span class="pre">bytes</span></code> and to <code class="docutils literal"><span class="pre">string</span></code>.</p>
<p>String literals support escape characters, such as <code class="docutils literal"><span class="pre">\n</span></code>, <code class="docutils literal"><span class="pre">\xNN</span></code> and <code class="docutils literal"><span class="pre">\uNNNN</span></code>. <code class="docutils literal"><span class="pre">\xNN</span></code> takes a hex value and inserts the appropriate byte, while <code class="docutils literal"><span class="pre">\uNNNN</span></code> takes a Unicode codepoint and inserts an UTF-8 sequence.</p>
</div>
<div class="section" id="hexadecimal-literals">
<span id="index-10"></span><h3>Hexadecimal Literals<a class="headerlink" href="#hexadecimal-literals" title="Permalink to this headline">¶</a></h3>
<p>Hexademical Literals are prefixed with the keyword <code class="docutils literal"><span class="pre">hex</span></code> and are enclosed in double or single-quotes (<code class="docutils literal"><span class="pre">hex&quot;001122FF&quot;</span></code>). Their content must be a hexadecimal string and their value will be the binary representation of those values.</p>
<p>Hexademical Literals behave like String Literals and have the same convertibility restrictions.</p>
</div>
<div class="section" id="enums">
<span id="index-11"></span><span id="id5"></span><h3>Enums<a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h3>
<p>Enums are one way to create a user-defined type in Solidity. They are explicitly convertible
to and from all integer types but implicit conversion is not allowed.  The explicit conversions
check the value ranges at runtime and a failure causes an exception.  Enums needs at least one member.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">test</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="nx">ActionChoices</span> <span class="p">{</span> <span class="nx">GoLeft</span><span class="p">,</span> <span class="nx">GoRight</span><span class="p">,</span> <span class="nx">GoStraight</span><span class="p">,</span> <span class="nx">SitStill</span> <span class="p">}</span>
    <span class="nx">ActionChoices</span> <span class="nx">choice</span><span class="p">;</span>
    <span class="nx">ActionChoices</span> <span class="k">constant</span> <span class="nx">defaultChoice</span> <span class="o">=</span> <span class="nx">ActionChoices</span><span class="p">.</span><span class="nx">GoStraight</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">setGoStraight</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="nx">choice</span> <span class="o">=</span> <span class="nx">ActionChoices</span><span class="p">.</span><span class="nx">GoStraight</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Since enum types are not part of the ABI, the signature of &quot;getChoice&quot;</span>
    <span class="c1">// will automatically be changed to &quot;getChoice() returns (uint8)&quot;</span>
    <span class="c1">// for all matters external to Solidity. The integer type used is just</span>
    <span class="c1">// large enough to hold all enum values, i.e. if you have more values,</span>
    <span class="c1">// `uint16` will be used and so on.</span>
    <span class="kd">function</span> <span class="nx">getChoice</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="nx">ActionChoices</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">choice</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getDefaultChoice</span><span class="p">()</span> <span class="k">public</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">uint</span><span class="p">(</span><span class="nx">defaultChoice</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="function-types">
<span id="index-12"></span><span id="id6"></span><h3>Function Types<a class="headerlink" href="#function-types" title="Permalink to this headline">¶</a></h3>
<p>Function types are the types of functions. Variables of function type
can be assigned from functions and function parameters of function type
can be used to pass functions to and return functions from function calls.
Function types come in two flavours - <em>internal</em> and <em>external</em> functions:</p>
<p>Internal functions can only be called inside the current contract (more specifically,
inside the current code unit, which also includes internal library functions
and inherited functions) because they cannot be executed outside of the
context of the current contract. Calling an internal function is realized
by jumping to its entry label, just like when calling a function of the current
contract internally.</p>
<p>External functions consist of an address and a function signature and they can
be passed via and returned from external function calls.</p>
<p>Function types are notated as follows:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">parameter</span> <span class="nx">types</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span><span class="k">internal</span><span class="o">|</span><span class="k">external</span><span class="p">}</span> <span class="p">[</span><span class="k">pure</span><span class="o">|</span><span class="k">constant</span><span class="o">|</span><span class="k">view</span><span class="o">|</span><span class="k">payable</span><span class="p">]</span> <span class="p">[</span><span class="k">returns</span> <span class="p">(</span><span class="o">&lt;</span><span class="k">return</span> <span class="nx">types</span><span class="o">&gt;</span><span class="p">)]</span>
</pre></div>
</div>
<p>In contrast to the parameter types, the return types cannot be empty - if the
function type should not return anything, the whole <code class="docutils literal"><span class="pre">returns</span> <span class="pre">(&lt;return</span> <span class="pre">types&gt;)</span></code>
part has to be omitted.</p>
<p>By default, function types are internal, so the <code class="docutils literal"><span class="pre">internal</span></code> keyword can be
omitted. In contrast, contract functions themselves are public by default,
only when used as the name of a type, the default is internal.</p>
<p>There are two ways to access a function in the current contract: Either directly
by its name, <code class="docutils literal"><span class="pre">f</span></code>, or using <code class="docutils literal"><span class="pre">this.f</span></code>. The former will result in an internal
function, the latter in an external function.</p>
<p>If a function type variable is not initialized, calling it will result
in an exception. The same happens if you call a function after using <code class="docutils literal"><span class="pre">delete</span></code>
on it.</p>
<p>If external function types are used outside of the context of Solidity,
they are treated as the <code class="docutils literal"><span class="pre">function</span></code> type, which encodes the address
followed by the function identifier together in a single <code class="docutils literal"><span class="pre">bytes24</span></code> type.</p>
<p>Note that public functions of the current contract can be used both as an
internal and as an external function. To use <code class="docutils literal"><span class="pre">f</span></code> as an internal function,
just use <code class="docutils literal"><span class="pre">f</span></code>, if you want to use its external form, use <code class="docutils literal"><span class="pre">this.f</span></code>.</p>
<p>Additionally, public (or external) functions also have a special member called <code class="docutils literal"><span class="pre">selector</span></code>,
which returns the <a class="reference internal" href="abi-spec.html#abi-function-selector"><span class="std std-ref">ABI function selector</span></a>:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">Selector</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes4</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">f</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example that shows how to use internal function types:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">library</span> <span class="nx">ArrayUtils</span> <span class="p">{</span>
  <span class="c1">// internal functions can be used in internal library functions because</span>
  <span class="c1">// they will be part of the same code context</span>
  <span class="kd">function</span> <span class="nx">map</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="nx">self</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="nx">f</span><span class="p">)</span>
    <span class="k">internal</span>
    <span class="k">pure</span>
    <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="nx">r</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint</span><span class="p">[](</span><span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">r</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">f</span><span class="p">(</span><span class="nx">self</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">reduce</span><span class="p">(</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="nx">self</span><span class="p">,</span>
    <span class="kd">function</span> <span class="p">(</span><span class="kt">uint</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="nx">f</span>
  <span class="p">)</span>
    <span class="k">internal</span>
    <span class="k">pure</span>
    <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">r</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">r</span> <span class="o">=</span> <span class="nx">self</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">f</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">self</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">range</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">length</span><span class="p">)</span> <span class="k">internal</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint</span><span class="p">[](</span><span class="nx">length</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">r</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">contract</span> <span class="nx">Pyramid</span> <span class="p">{</span>
  <span class="k">using</span> <span class="nx">ArrayUtils</span> <span class="k">for</span> <span class="o">*</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">pyramid</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">l</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">ArrayUtils</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">l</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">sum</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">square</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">x</span><span class="p">)</span> <span class="k">internal</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">x</span><span class="p">,</span> <span class="kt">uint</span> <span class="nx">y</span><span class="p">)</span> <span class="k">internal</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another example that uses external function types:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">11</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">Oracle</span> <span class="p">{</span>
  <span class="kd">struct</span> <span class="nx">Request</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="nx">data</span><span class="p">;</span>
    <span class="kd">function</span><span class="p">(</span><span class="kt">bytes</span> <span class="k">memory</span><span class="p">)</span> <span class="k">external</span> <span class="nx">callback</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">Request</span><span class="p">[]</span> <span class="nx">requests</span><span class="p">;</span>
  <span class="kd">event</span> <span class="nx">NewRequest</span><span class="p">(</span><span class="kt">uint</span><span class="p">);</span>
  <span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="kt">bytes</span> <span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="kt">bytes</span> <span class="k">memory</span><span class="p">)</span> <span class="k">external</span> <span class="nx">callback</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
    <span class="nx">requests</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Request</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">));</span>
    <span class="nx">NewRequest</span><span class="p">(</span><span class="nx">requests</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">reply</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">requestID</span><span class="p">,</span> <span class="kt">bytes</span> <span class="nx">response</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
    <span class="c1">// Here goes the check that the reply comes from a trusted source</span>
    <span class="nx">requests</span><span class="p">[</span><span class="nx">requestID</span><span class="p">].</span><span class="nx">callback</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">contract</span> <span class="nx">OracleUser</span> <span class="p">{</span>
  <span class="nx">Oracle</span> <span class="k">constant</span> <span class="nx">oracle</span> <span class="o">=</span> <span class="nx">Oracle</span><span class="p">(</span><span class="mh">0x1234567</span><span class="p">);</span> <span class="c1">// known contract</span>
  <span class="kd">function</span> <span class="nx">buySomething</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">oracle</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;USD&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">oracleResponse</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">oracleResponse</span><span class="p">(</span><span class="kt">bytes</span> <span class="nx">response</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
    <span class="nb">require</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="nx">sender</span> <span class="o">==</span> <span class="kt">address</span><span class="p">(</span><span class="nx">oracle</span><span class="p">));</span>
    <span class="c1">// Use the data</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Lambda or inline functions are planned but not yet supported.</p>
</div>
</div>
</div>
<div class="section" id="reference-types">
<span id="index-13"></span><h2>Reference Types<a class="headerlink" href="#reference-types" title="Permalink to this headline">¶</a></h2>
<p>Complex types, i.e. types which do not always fit into 256 bits have to be handled
more carefully than the value-types we have already seen. Since copying
them can be quite expensive, we have to think about whether we want them to be
stored in <strong>memory</strong> (which is not persisting) or <strong>storage</strong> (where the state
variables are held).</p>
<div class="section" id="data-location">
<h3>Data location<a class="headerlink" href="#data-location" title="Permalink to this headline">¶</a></h3>
<p>Every complex type, i.e. <em>arrays</em> and <em>structs</em>, has an additional
annotation, the “data location”, about whether it is stored in memory or in storage. Depending on the
context, there is always a default, but it can be overridden by appending
either <code class="docutils literal"><span class="pre">storage</span></code> or <code class="docutils literal"><span class="pre">memory</span></code> to the type. The default for function parameters (including return parameters) is <code class="docutils literal"><span class="pre">memory</span></code>, the default for local variables is <code class="docutils literal"><span class="pre">storage</span></code> and the location is forced
to <code class="docutils literal"><span class="pre">storage</span></code> for state variables (obviously).</p>
<p>There is also a third data location, <code class="docutils literal"><span class="pre">calldata</span></code>, which is a non-modifiable,
non-persistent area where function arguments are stored. Function parameters
(not return parameters) of external functions are forced to <code class="docutils literal"><span class="pre">calldata</span></code> and
behave mostly like <code class="docutils literal"><span class="pre">memory</span></code>.</p>
<p>Data locations are important because they change how assignments behave:
assignments between storage and memory and also to a state variable (even from other state variables)
always create an independent copy.
Assignments to local storage variables only assign a reference though, and
this reference always points to the state variable even if the latter is changed
in the meantime.
On the other hand, assignments from a memory stored reference type to another
memory-stored reference type do not create a copy.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">C</span> <span class="p">{</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="nx">x</span><span class="p">;</span> <span class="c1">// the data location of x is storage</span>

    <span class="c1">// the data location of memoryArray is memory</span>
    <span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="nx">memoryArray</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">memoryArray</span><span class="p">;</span> <span class="c1">// works, copies the whole array to storage</span>
        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span> <span class="c1">// works, assigns a pointer, data location of y is storage</span>
        <span class="nx">y</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span> <span class="c1">// fine, returns the 8th element</span>
        <span class="nx">y</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// fine, modifies x through y</span>
        <span class="k">delete</span> <span class="nx">x</span><span class="p">;</span> <span class="c1">// fine, clears the array, also modifies y</span>
        <span class="c1">// The following does not work; it would need to create a new temporary /</span>
        <span class="c1">// unnamed array in storage, but storage is &quot;statically&quot; allocated:</span>
        <span class="c1">// y = memoryArray;</span>
        <span class="c1">// This does not work either, since it would &quot;reset&quot; the pointer, but there</span>
        <span class="c1">// is no sensible location it could point to.</span>
        <span class="c1">// delete y;</span>
        <span class="nx">g</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// calls g, handing over a reference to x</span>
        <span class="nx">h</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// calls h and creates an independent, temporary copy in memory</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">storage</span> <span class="nx">storageArray</span><span class="p">)</span> <span class="k">internal</span> <span class="p">{}</span>
    <span class="kd">function</span> <span class="nx">h</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="nx">memoryArray</span><span class="p">)</span> <span class="k">public</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="summary">
<h4>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Forced data location:</dt>
<dd><ul class="first last simple">
<li>parameters (not return) of external functions: calldata</li>
<li>state variables: storage</li>
</ul>
</dd>
<dt>Default data location:</dt>
<dd><ul class="first last simple">
<li>parameters (also return) of functions: memory</li>
<li>all other local variables: storage</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="arrays">
<span id="index-14"></span><span id="id7"></span><h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h3>
<p>Arrays can have a compile-time fixed size or they can be dynamic.
For storage arrays, the element type can be arbitrary (i.e. also other
arrays, mappings or structs). For memory arrays, it cannot be a mapping and
has to be an ABI type if it is an argument of a publicly-visible function.</p>
<p>An array of fixed size <code class="docutils literal"><span class="pre">k</span></code> and element type <code class="docutils literal"><span class="pre">T</span></code> is written as <code class="docutils literal"><span class="pre">T[k]</span></code>,
an array of dynamic size as <code class="docutils literal"><span class="pre">T[]</span></code>. As an example, an array of 5 dynamic
arrays of <code class="docutils literal"><span class="pre">uint</span></code> is <code class="docutils literal"><span class="pre">uint[][5]</span></code> (note that the notation is reversed when
compared to some other languages). To access the second uint in the
third dynamic array, you use <code class="docutils literal"><span class="pre">x[2][1]</span></code> (indices are zero-based and
access works in the opposite way of the declaration, i.e. <code class="docutils literal"><span class="pre">x[2]</span></code>
shaves off one level in the type from the right).</p>
<p>Variables of type <code class="docutils literal"><span class="pre">bytes</span></code> and <code class="docutils literal"><span class="pre">string</span></code> are special arrays. A <code class="docutils literal"><span class="pre">bytes</span></code> is similar to <code class="docutils literal"><span class="pre">byte[]</span></code>,
but it is packed tightly in calldata. <code class="docutils literal"><span class="pre">string</span></code> is equal to <code class="docutils literal"><span class="pre">bytes</span></code> but does not allow
length or index access (for now).</p>
<p>So <code class="docutils literal"><span class="pre">bytes</span></code> should always be preferred over <code class="docutils literal"><span class="pre">byte[]</span></code> because it is cheaper.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to access the byte-representation of a string <code class="docutils literal"><span class="pre">s</span></code>, use
<code class="docutils literal"><span class="pre">bytes(s).length</span></code> / <code class="docutils literal"><span class="pre">bytes(s)[7]</span> <span class="pre">=</span> <span class="pre">'x';</span></code>. Keep in mind
that you are accessing the low-level bytes of the UTF-8 representation,
and not the individual characters!</p>
</div>
<p>It is possible to mark arrays <code class="docutils literal"><span class="pre">public</span></code> and have Solidity create a <a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a>.
The numeric index will become a required parameter for the getter.</p>
<div class="section" id="allocating-memory-arrays">
<span id="index-15"></span><h4>Allocating Memory Arrays<a class="headerlink" href="#allocating-memory-arrays" title="Permalink to this headline">¶</a></h4>
<p>Creating arrays with variable length in memory can be done using the <code class="docutils literal"><span class="pre">new</span></code> keyword.
As opposed to storage arrays, it is <strong>not</strong> possible to resize memory arrays by assigning to
the <code class="docutils literal"><span class="pre">.length</span></code> member.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">C</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">len</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="p">{</span>
        <span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint</span><span class="p">[](</span><span class="mi">7</span><span class="p">);</span>
        <span class="kt">bytes</span> <span class="k">memory</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">bytes</span><span class="p">(</span><span class="nx">len</span><span class="p">);</span>
        <span class="c1">// Here we have a.length == 7 and b.length == len</span>
        <span class="nx">a</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="array-literals-inline-arrays">
<span id="index-16"></span><h4>Array Literals / Inline Arrays<a class="headerlink" href="#array-literals-inline-arrays" title="Permalink to this headline">¶</a></h4>
<p>Array literals are arrays that are written as an expression and are not
assigned to a variable right away.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">C</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="k">public</span> <span class="k">pure</span> <span class="p">{</span>
        <span class="nx">g</span><span class="p">([</span><span class="kt">uint</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="nx">_data</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The type of an array literal is a memory array of fixed size whose base
type is the common type of the given elements. The type of <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> is
<code class="docutils literal"><span class="pre">uint8[3]</span> <span class="pre">memory</span></code>, because the type of each of these constants is <code class="docutils literal"><span class="pre">uint8</span></code>.
Because of that, it was necessary to convert the first element in the example
above to <code class="docutils literal"><span class="pre">uint</span></code>. Note that currently, fixed size memory arrays cannot
be assigned to dynamically-sized memory arrays, i.e. the following is not
possible:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="c1">// This will not compile.</span>

<span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">C</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// The next line creates a type error because uint[3] memory</span>
        <span class="c1">// cannot be converted to uint[] memory.</span>
        <span class="kt">uint</span><span class="p">[]</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">[</span><span class="kt">uint</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is planned to remove this restriction in the future but currently creates
some complications because of how arrays are passed in the ABI.</p>
</div>
<div class="section" id="members">
<span id="index-17"></span><h4>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><strong>length</strong>:</dt>
<dd>Arrays have a <code class="docutils literal"><span class="pre">length</span></code> member to hold their number of elements.
Dynamic arrays can be resized in storage (not in memory) by changing the
<code class="docutils literal"><span class="pre">.length</span></code> member. This does not happen automatically when attempting to access elements outside the current length. The size of memory arrays is fixed (but dynamic, i.e. it can depend on runtime parameters) once they are created.</dd>
<dt><strong>push</strong>:</dt>
<dd>Dynamic storage arrays and <code class="docutils literal"><span class="pre">bytes</span></code> (not <code class="docutils literal"><span class="pre">string</span></code>) have a member function called <code class="docutils literal"><span class="pre">push</span></code> that can be used to append an element at the end of the array. The function returns the new length.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is not yet possible to use arrays of arrays in external functions.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Due to limitations of the EVM, it is not possible to return
dynamic content from external function calls. The function <code class="docutils literal"><span class="pre">f</span></code> in
<code class="docutils literal"><span class="pre">contract</span> <span class="pre">C</span> <span class="pre">{</span> <span class="pre">function</span> <span class="pre">f()</span> <span class="pre">returns</span> <span class="pre">(uint[])</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span> <span class="pre">}</span></code> will return
something if called from web3.js, but not if called from Solidity.</p>
<p class="last">The only workaround for now is to use large statically-sized arrays.</p>
</div>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">16</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">ArrayContract</span> <span class="p">{</span>
    <span class="kt">uint</span><span class="p">[</span><span class="mi">2</span><span class="o">**</span><span class="mi">20</span><span class="p">]</span> <span class="nx">m_aLotOfIntegers</span><span class="p">;</span>
    <span class="c1">// Note that the following is not a pair of dynamic arrays but a</span>
    <span class="c1">// dynamic array of pairs (i.e. of fixed size arrays of length two).</span>
    <span class="kt">bool</span><span class="p">[</span><span class="mi">2</span><span class="p">][]</span> <span class="nx">m_pairsOfFlags</span><span class="p">;</span>
    <span class="c1">// newPairs is stored in memory - the default for function arguments</span>

    <span class="kd">function</span> <span class="nx">setAllFlagPairs</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="mi">2</span><span class="p">][]</span> <span class="nx">newPairs</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// assignment to a storage array replaces the complete array</span>
        <span class="nx">m_pairsOfFlags</span> <span class="o">=</span> <span class="nx">newPairs</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setFlagPair</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">index</span><span class="p">,</span> <span class="kt">bool</span> <span class="nx">flagA</span><span class="p">,</span> <span class="kt">bool</span> <span class="nx">flagB</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// access to a non-existing index will throw an exception</span>
        <span class="nx">m_pairsOfFlags</span><span class="p">[</span><span class="nx">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">flagA</span><span class="p">;</span>
        <span class="nx">m_pairsOfFlags</span><span class="p">[</span><span class="nx">index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">flagB</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">changeFlagArraySize</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">newSize</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// if the new size is smaller, removed array elements will be cleared</span>
        <span class="nx">m_pairsOfFlags</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">newSize</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">clear</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// these clear the arrays completely</span>
        <span class="k">delete</span> <span class="nx">m_pairsOfFlags</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">m_aLotOfIntegers</span><span class="p">;</span>
        <span class="c1">// identical effect here</span>
        <span class="nx">m_pairsOfFlags</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">bytes</span> <span class="nx">m_byteData</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">byteArrays</span><span class="p">(</span><span class="kt">bytes</span> <span class="nx">data</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// byte arrays (&quot;bytes&quot;) are different as they are stored without padding,</span>
        <span class="c1">// but can be treated identical to &quot;uint8[]&quot;</span>
        <span class="nx">m_byteData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="nx">m_byteData</span><span class="p">.</span><span class="nx">length</span> <span class="o">+=</span> <span class="mi">7</span><span class="p">;</span>
        <span class="nx">m_byteData</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="kt">byte</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
        <span class="k">delete</span> <span class="nx">m_byteData</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addFlag</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="nx">flag</span><span class="p">)</span> <span class="k">public</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">m_pairsOfFlags</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">flag</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createMemoryArray</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">size</span><span class="p">)</span> <span class="k">public</span> <span class="k">pure</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Dynamic memory arrays are created using `new`:</span>
        <span class="kt">uint</span><span class="p">[</span><span class="mi">2</span><span class="p">][]</span> <span class="k">memory</span> <span class="nx">arrayOfPairs</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint</span><span class="p">[</span><span class="mi">2</span><span class="p">][](</span><span class="nx">size</span><span class="p">);</span>
        <span class="c1">// Create a dynamic byte array:</span>
        <span class="kt">bytes</span> <span class="k">memory</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">bytes</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kt">byte</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="structs">
<span id="index-18"></span><span id="id8"></span><h3>Structs<a class="headerlink" href="#structs" title="Permalink to this headline">¶</a></h3>
<p>Solidity provides a way to define new types in the form of structs, which is
shown in the following example:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">11</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">CrowdFunding</span> <span class="p">{</span>
    <span class="c1">// Defines a new type with two fields.</span>
    <span class="kd">struct</span> <span class="nx">Funder</span> <span class="p">{</span>
        <span class="kt">address</span> <span class="nx">addr</span><span class="p">;</span>
        <span class="kt">uint</span> <span class="nx">amount</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">struct</span> <span class="nx">Campaign</span> <span class="p">{</span>
        <span class="kt">address</span> <span class="nx">beneficiary</span><span class="p">;</span>
        <span class="kt">uint</span> <span class="nx">fundingGoal</span><span class="p">;</span>
        <span class="kt">uint</span> <span class="nx">numFunders</span><span class="p">;</span>
        <span class="kt">uint</span> <span class="nx">amount</span><span class="p">;</span>
        <span class="k">mapping</span> <span class="p">(</span><span class="kt">uint</span> <span class="o">=&gt;</span> <span class="nx">Funder</span><span class="p">)</span> <span class="nx">funders</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">uint</span> <span class="nx">numCampaigns</span><span class="p">;</span>
    <span class="k">mapping</span> <span class="p">(</span><span class="kt">uint</span> <span class="o">=&gt;</span> <span class="nx">Campaign</span><span class="p">)</span> <span class="nx">campaigns</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">newCampaign</span><span class="p">(</span><span class="kt">address</span> <span class="nx">beneficiary</span><span class="p">,</span> <span class="kt">uint</span> <span class="nx">goal</span><span class="p">)</span> <span class="k">public</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span> <span class="nx">campaignID</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">campaignID</span> <span class="o">=</span> <span class="nx">numCampaigns</span><span class="o">++</span><span class="p">;</span> <span class="c1">// campaignID is return variable</span>
        <span class="c1">// Creates new struct and saves in storage. We leave out the mapping type.</span>
        <span class="nx">campaigns</span><span class="p">[</span><span class="nx">campaignID</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Campaign</span><span class="p">(</span><span class="nx">beneficiary</span><span class="p">,</span> <span class="nx">goal</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">contribute</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">campaignID</span><span class="p">)</span> <span class="k">public</span> <span class="k">payable</span> <span class="p">{</span>
        <span class="nx">Campaign</span> <span class="k">storage</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">campaigns</span><span class="p">[</span><span class="nx">campaignID</span><span class="p">];</span>
        <span class="c1">// Creates a new temporary memory struct, initialised with the given values</span>
        <span class="c1">// and copies it over to storage.</span>
        <span class="c1">// Note that you can also use Funder(msg.sender, msg.value) to initialise.</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">funders</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">numFunders</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Funder</span><span class="p">({</span><span class="nx">addr</span><span class="o">:</span> <span class="nb">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">amount</span><span class="o">:</span> <span class="nb">msg</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">amount</span> <span class="o">+=</span> <span class="nb">msg</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">checkGoalReached</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">campaignID</span><span class="p">)</span> <span class="k">public</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span> <span class="nx">reached</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Campaign</span> <span class="k">storage</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">campaigns</span><span class="p">[</span><span class="nx">campaignID</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">amount</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">fundingGoal</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="kt">uint</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">amount</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">amount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">beneficiary</span><span class="p">.</span><span class="nx">transfer</span><span class="p">(</span><span class="nx">amount</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The contract does not provide the full functionality of a crowdfunding
contract, but it contains the basic concepts necessary to understand structs.
Struct types can be used inside mappings and arrays and they can itself
contain mappings and arrays.</p>
<p>It is not possible for a struct to contain a member of its own type,
although the struct itself can be the value type of a mapping member.
This restriction is necessary, as the size of the struct has to be finite.</p>
<p>Note how in all the functions, a struct type is assigned to a local variable
(of the default storage data location).
This does not copy the struct but only stores a reference so that assignments to
members of the local variable actually write to the state.</p>
<p>Of course, you can also directly access the members of the struct without
assigning it to a local variable, as in
<code class="docutils literal"><span class="pre">campaigns[campaignID].amount</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
</div>
</div>
<div class="section" id="mappings">
<span id="index-19"></span><h2>Mappings<a class="headerlink" href="#mappings" title="Permalink to this headline">¶</a></h2>
<p>Mapping types are declared as <code class="docutils literal"><span class="pre">mapping(_KeyType</span> <span class="pre">=&gt;</span> <span class="pre">_ValueType)</span></code>.
Here <code class="docutils literal"><span class="pre">_KeyType</span></code> can be almost any type except for a mapping, a dynamically sized array, a contract, an enum and a struct.
<code class="docutils literal"><span class="pre">_ValueType</span></code> can actually be any type, including mappings.</p>
<p>Mappings can be seen as <a class="reference external" href="https://en.wikipedia.org/wiki/Hash_table">hash tables</a> which are virtually initialized such that
every possible key exists and is mapped to a value whose byte-representation is
all zeros: a type’s <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">default value</span></a>. The similarity ends here, though: The key data is not actually stored
in a mapping, only its <code class="docutils literal"><span class="pre">keccak256</span></code> hash used to look up the value.</p>
<p>Because of this, mappings do not have a length or a concept of a key or value being “set”.</p>
<p>Mappings are only allowed for state variables (or as storage reference types
in internal functions).</p>
<p>It is possible to mark mappings <code class="docutils literal"><span class="pre">public</span></code> and have Solidity create a <a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a>.
The <code class="docutils literal"><span class="pre">_KeyType</span></code> will become a required parameter for the getter and it will
return <code class="docutils literal"><span class="pre">_ValueType</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">_ValueType</span></code> can be a mapping too. The getter will have one parameter
for each <code class="docutils literal"><span class="pre">_KeyType</span></code>, recursively.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">MappingExample</span> <span class="p">{</span>
    <span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint</span><span class="p">)</span> <span class="k">public</span> <span class="nx">balances</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">update</span><span class="p">(</span><span class="kt">uint</span> <span class="nx">newBalance</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="nx">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newBalance</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">contract</span> <span class="nx">MappingUser</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="k">public</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">MappingExample</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MappingExample</span><span class="p">();</span>
        <span class="nx">m</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">balances</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mappings are not iterable, but it is possible to implement a data structure on top of them.
For an example, see <a class="reference external" href="https://github.com/ethereum/dapp-bin/blob/master/library/iterable_mapping.sol">iterable mapping</a>.</p>
</div>
</div>
<div class="section" id="operators-involving-lvalues">
<span id="index-20"></span><h2>Operators Involving LValues<a class="headerlink" href="#operators-involving-lvalues" title="Permalink to this headline">¶</a></h2>
<p>If <code class="docutils literal"><span class="pre">a</span></code> is an LValue (i.e. a variable or something that can be assigned to), the following operators are available as shorthands:</p>
<p><code class="docutils literal"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">e</span></code> is equivalent to <code class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">e</span></code>. The operators <code class="docutils literal"><span class="pre">-=</span></code>, <code class="docutils literal"><span class="pre">*=</span></code>, <code class="docutils literal"><span class="pre">/=</span></code>, <code class="docutils literal"><span class="pre">%=</span></code>, <code class="docutils literal"><span class="pre">|=</span></code>, <code class="docutils literal"><span class="pre">&amp;=</span></code> and <code class="docutils literal"><span class="pre">^=</span></code> are defined accordingly. <code class="docutils literal"><span class="pre">a++</span></code> and <code class="docutils literal"><span class="pre">a--</span></code> are equivalent to <code class="docutils literal"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span></code> / <code class="docutils literal"><span class="pre">a</span> <span class="pre">-=</span> <span class="pre">1</span></code> but the expression itself still has the previous value of <code class="docutils literal"><span class="pre">a</span></code>. In contrast, <code class="docutils literal"><span class="pre">--a</span></code> and <code class="docutils literal"><span class="pre">++a</span></code> have the same effect on <code class="docutils literal"><span class="pre">a</span></code> but return the value after the change.</p>
<div class="section" id="delete">
<h3>delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">delete</span> <span class="pre">a</span></code> assigns the initial value for the type to <code class="docutils literal"><span class="pre">a</span></code>. I.e. for integers it is equivalent to <code class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">0</span></code>, but it can also be used on arrays, where it assigns a dynamic array of length zero or a static array of the same length with all elements reset. For structs, it assigns a struct with all members reset.</p>
<p><code class="docutils literal"><span class="pre">delete</span></code> has no effect on whole mappings (as the keys of mappings may be arbitrary and are generally unknown). So if you delete a struct, it will reset all members that are not mappings and also recurse into the members unless they are mappings. However, individual keys and what they map to can be deleted.</p>
<p>It is important to note that <code class="docutils literal"><span class="pre">delete</span> <span class="pre">a</span></code> really behaves like an assignment to <code class="docutils literal"><span class="pre">a</span></code>, i.e. it stores a new object in <code class="docutils literal"><span class="pre">a</span></code>.</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="kd">contract</span> <span class="nx">DeleteExample</span> <span class="p">{</span>
    <span class="kt">uint</span> <span class="nx">data</span><span class="p">;</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="nx">dataArray</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="kt">uint</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">x</span><span class="p">;</span> <span class="c1">// sets x to 0, does not affect data</span>
        <span class="k">delete</span> <span class="nx">data</span><span class="p">;</span> <span class="c1">// sets data to 0, does not affect x which still holds a copy</span>
        <span class="kt">uint</span><span class="p">[]</span> <span class="k">storage</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">dataArray</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">dataArray</span><span class="p">;</span> <span class="c1">// this sets dataArray.length to zero, but as uint[] is a complex object, also</span>
        <span class="c1">// y is affected which is an alias to the storage object</span>
        <span class="c1">// On the other hand: &quot;delete y&quot; is not valid, as assignments to local variables</span>
        <span class="c1">// referencing storage objects can only be made from existing storage objects.</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conversions-between-elementary-types">
<span id="index-21"></span><h2>Conversions between Elementary Types<a class="headerlink" href="#conversions-between-elementary-types" title="Permalink to this headline">¶</a></h2>
<div class="section" id="implicit-conversions">
<h3>Implicit Conversions<a class="headerlink" href="#implicit-conversions" title="Permalink to this headline">¶</a></h3>
<p>If an operator is applied to different types, the compiler tries to
implicitly convert one of the operands to the type of the other (the same is
true for assignments). In general, an implicit conversion between value-types
is possible if it
makes sense semantically and no information is lost: <code class="docutils literal"><span class="pre">uint8</span></code> is convertible to
<code class="docutils literal"><span class="pre">uint16</span></code> and <code class="docutils literal"><span class="pre">int128</span></code> to <code class="docutils literal"><span class="pre">int256</span></code>, but <code class="docutils literal"><span class="pre">int8</span></code> is not convertible to <code class="docutils literal"><span class="pre">uint256</span></code>
(because <code class="docutils literal"><span class="pre">uint256</span></code> cannot hold e.g. <code class="docutils literal"><span class="pre">-1</span></code>).
Furthermore, unsigned integers can be converted to bytes of the same or larger
size, but not vice-versa. Any type that can be converted to <code class="docutils literal"><span class="pre">uint160</span></code> can also
be converted to <code class="docutils literal"><span class="pre">address</span></code>.</p>
</div>
<div class="section" id="explicit-conversions">
<h3>Explicit Conversions<a class="headerlink" href="#explicit-conversions" title="Permalink to this headline">¶</a></h3>
<p>If the compiler does not allow implicit conversion but you know what you are
doing, an explicit type conversion is sometimes possible. Note that this may
give you some unexpected behaviour so be sure to test to ensure that the
result is what you want! Take the following example where you are converting
a negative <code class="docutils literal"><span class="pre">int8</span></code> to a <code class="docutils literal"><span class="pre">uint</span></code>:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">int8</span> <span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
<span class="kt">uint</span> <span class="nx">x</span> <span class="o">=</span> <span class="kt">uint</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
</pre></div>
</div>
<p>At the end of this code snippet, <code class="docutils literal"><span class="pre">x</span></code> will have the value <code class="docutils literal"><span class="pre">0xfffff..fd</span></code> (64 hex
characters), which is -3 in the two’s complement representation of 256 bits.</p>
<p>If a type is explicitly converted to a smaller type, higher-order bits are
cut off:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">uint32</span> <span class="nx">a</span> <span class="o">=</span> <span class="mh">0x12345678</span><span class="p">;</span>
<span class="kt">uint16</span> <span class="nx">b</span> <span class="o">=</span> <span class="kt">uint16</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// b will be 0x5678 now</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="type-deduction">
<span id="index-22"></span><span id="id9"></span><h2>Type Deduction<a class="headerlink" href="#type-deduction" title="Permalink to this headline">¶</a></h2>
<p>For convenience, it is not always necessary to explicitly specify the type of a
variable, the compiler automatically infers it from the type of the first
expression that is assigned to the variable:</p>
<div class="highlight-Solidity"><div class="highlight"><pre><span></span><span class="kt">uint24</span> <span class="nx">x</span> <span class="o">=</span> <span class="mh">0x123</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
</pre></div>
</div>
<p>Here, the type of <code class="docutils literal"><span class="pre">y</span></code> will be <code class="docutils literal"><span class="pre">uint24</span></code>. Using <code class="docutils literal"><span class="pre">var</span></code> is not possible for function
parameters or return parameters.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The type is only deduced from the first assignment, so
the loop in the following snippet is infinite, as <code class="docutils literal"><span class="pre">i</span></code> will have the type
<code class="docutils literal"><span class="pre">uint8</span></code> and the highest value of this type is smaller than <code class="docutils literal"><span class="pre">2000</span></code>.
<code class="docutils literal"><span class="pre">for</span> <span class="pre">(var</span> <span class="pre">i</span> <span class="pre">=</span> <span class="pre">0;</span> <span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">2000;</span> <span class="pre">i++)</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Types</a><ul>
<li><a class="reference internal" href="#value-types">Value Types</a><ul>
<li><a class="reference internal" href="#booleans">Booleans</a></li>
<li><a class="reference internal" href="#integers">Integers</a></li>
<li><a class="reference internal" href="#fixed-point-numbers">Fixed Point Numbers</a></li>
<li><a class="reference internal" href="#address">Address</a><ul>
<li><a class="reference internal" href="#members-of-addresses">Members of Addresses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixed-size-byte-arrays">Fixed-size byte arrays</a></li>
<li><a class="reference internal" href="#dynamically-sized-byte-array">Dynamically-sized byte array</a></li>
<li><a class="reference internal" href="#address-literals">Address Literals</a></li>
<li><a class="reference internal" href="#rational-and-integer-literals">Rational and Integer Literals</a></li>
<li><a class="reference internal" href="#string-literals">String Literals</a></li>
<li><a class="reference internal" href="#hexadecimal-literals">Hexadecimal Literals</a></li>
<li><a class="reference internal" href="#enums">Enums</a></li>
<li><a class="reference internal" href="#function-types">Function Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-types">Reference Types</a><ul>
<li><a class="reference internal" href="#data-location">Data location</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arrays">Arrays</a><ul>
<li><a class="reference internal" href="#allocating-memory-arrays">Allocating Memory Arrays</a></li>
<li><a class="reference internal" href="#array-literals-inline-arrays">Array Literals / Inline Arrays</a></li>
<li><a class="reference internal" href="#members">Members</a></li>
</ul>
</li>
<li><a class="reference internal" href="#structs">Structs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mappings">Mappings</a></li>
<li><a class="reference internal" href="#operators-involving-lvalues">Operators Involving LValues</a><ul>
<li><a class="reference internal" href="#delete">delete</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conversions-between-elementary-types">Conversions between Elementary Types</a><ul>
<li><a class="reference internal" href="#implicit-conversions">Implicit Conversions</a></li>
<li><a class="reference internal" href="#explicit-conversions">Explicit Conversions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-deduction">Type Deduction</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="solidity-in-depth.html">Solidity in Depth</a><ul>
      <li>Previous: <a href="structure-of-a-contract.html" title="previous chapter">Structure of a Contract</a></li>
      <li>Next: <a href="units-and-global-variables.html" title="next chapter">Units and Globally Available Variables</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/types.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2017, Ethereum.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/types.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>